const f=["/favicon.ico","/favicon.png","/favicon.svg","/favicon"];async function u(r){try{const c=new AbortController,n=setTimeout(()=>c.abort(),5e3),i=await fetch(r,{method:"GET",signal:c.signal});if(clearTimeout(n),!i.ok)return null;const e=await i.text(),a=/<link[^>]*rel=["'](?:shortcut )?icon["'][^>]*>/gi,o=e.match(a);if(o&&o.length>0){const s=o[0].match(/href=["']([^"']+)["']/i);if(s&&s[1]){let t=s[1];return t.startsWith("//")?t=`${new URL(r).protocol}${t}`:t.startsWith("/")?t=`${new URL(r).origin}${t}`:t.startsWith("http")||(t=`${new URL(r).origin}/${t}`),t}}return null}catch{return null}}async function h(r,c){const n=[];if(c)try{new URL(c),n.push(c)}catch{}if(!r)return n;try{const i=new URL(r),e=i.origin;for(const t of f)n.push(`${e}${t}`);const a=i.hostname.split(".");let o=null;if(a.length>2){const t=a.slice(-2).join(".");if(o=`${i.protocol}//${t}`,o!==e)for(const l of f)n.push(`${o}${l}`)}const s=await u(e);if(s&&!n.includes(s)&&n.push(s),o&&o!==e){const t=await u(o);t&&!n.includes(t)&&n.push(t)}}catch(i){console.warn("Error building favicon URL list:",i)}return n}export{h as getAllFaviconUrls};
